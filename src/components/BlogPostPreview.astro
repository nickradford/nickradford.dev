---
import type { BlogPost } from "../lib/content";
import { getLocalDate } from "../lib/format-date";

interface Props {
  post: BlogPost;
  bottomCrosses?: boolean;
}

const { post, bottomCrosses } = Astro.props;

const dateFormatter = new Intl.DateTimeFormat("en-US", {
  dateStyle: "long",
});

const displayDate = getLocalDate(new Date(post.date));
---

<a
  href={`/blog/${post.slug}`}
  class="block group px-8 md:px-16 py-6 no-underline hover:text-inherit hover:bg-orange/5 transition-colors relative"
>
  <article class="flex flex-col space-y-3">
    <div class="space-y-2">
      <div class="flex items-center gap-3">
        <time
          class="text-xs uppercase tracking-widest text-orange/75 dark:text-zinc-500 font-geist-mono"
        >
          {dateFormatter.format(displayDate)}
        </time>
        {
          post.draft && (
            <span class="text-xs uppercase tracking-widest font-geist-mono font-medium px-2 py-1 bg-orange/20 dark:bg-orange/10 text-orange rounded">
              Draft
            </span>
          )
        }
      </div>
      <h3
        class="text-2xl font-geist-mono font-bold tracking-tight text-zinc-900 dark:text-zinc-50 group-hover:text-orange dark:group-hover:text-orange transition-colors"
      >
        {post.title}
      </h3>
    </div>
    <p class="leading-relaxed text-zinc-700 dark:text-zinc-300 prose font-geist">
      {post.excerpt}
    </p>
    <span
      class="text-sm font-geist-mono font-medium text-zinc-600 group-hover:text-orange dark:text-zinc-400 dark:group-hover:text-orange transition-colors pt-2"
    >
      Read more <i class="ph ph-arrow-right top-px relative"></i>
    </span>
  </article>
  <div class="dark:text-zinc-500 text-yellow-500 z-10">
    <svg
      class="absolute left-0 top-0 size-4 pointer-events-none -translate-x-1/2 -translate-y-1/2"
      viewBox="0 0 8 8"
    >
      <line x1="4" y1="0" x2="4" y2="8" stroke="currentColor" stroke-width="1"></line>
      <line x1="0" y1="4" x2="8" y2="4" stroke="currentColor" stroke-width="1"></line>
    </svg>
    <svg
      class="absolute right-0 top-0 size-4 translate-x-1/2 -translate-y-1/2 pointer-events-none"
      viewBox="0 0 8 8"
    >
      <line x1="4" y1="0" x2="4" y2="8" stroke="currentColor" stroke-width="1"></line>
      <line x1="0" y1="4" x2="8" y2="4" stroke="currentColor" stroke-width="1"></line>
    </svg>

    {
      bottomCrosses && (
        <>
          <svg
            class="absolute left-0 bottom-0 size-4 pointer-events-none -translate-x-1/2 translate-y-1/2"
            viewBox="0 0 8 8"
          >
            <line x1="4" y1="0" x2="4" y2="8" stroke="currentColor" stroke-width="1" />
            <line x1="0" y1="4" x2="8" y2="4" stroke="currentColor" stroke-width="1" />
          </svg>
          <svg
            class="absolute right-0 bottom-0 size-4 translate-x-1/2 translate-y-1/2 pointer-events-none"
            viewBox="0 0 8 8"
          >
            <line x1="4" y1="0" x2="4" y2="8" stroke="currentColor" stroke-width="1" />
            <line x1="0" y1="4" x2="8" y2="4" stroke="currentColor" stroke-width="1" />
          </svg>
        </>
      )
    }
  </div>
</a>
